<dom-module id="create-asset">
  <style>
    :host {
      display: block;
    }

    paper-button.colorful {
      color: #4285f4;
    }

    paper-material {
      max-width: 764px;
      padding: 1em;
    }

    paper-button[raised].colorful {
      background: var(--default-primary-color);
      color: #fff;
      margin: 10px;
    }

    h4 {
      display: inline-block;
    }

    h2 {
      text-align: center;
    }
    #osVersion {
      display: inline-block;
    }

    #squareImage {
      text-align: center;
      padding: 1em;
      margin: 1em;
    }

  </style>
  <template>
    <paper-material elevation="1" class="animated bounceInUp">
    <h2 class="paper-font-display2">Create Asset</h2>
    <img-base64 id="squareImage" width="150px" height="150px" title="Select your profile Image" placeholder="" class="circle"></img-base64>
    <paper-input label="Asset Id" id="assetId" error-message="Enter an Asset Id" auto-validate required></paper-input>
    <paper-input label="Brand" id="brand" error-message="Enter Brand Name (Apple, Samsung, LG, Nokia, etc.,)" auto-validate required></paper-input>
    <paper-input label="Model" id="model" error-message="Enter Model Name (iPhone5, iPhone6s, Nexus5)" auto-validate required></paper-input>

    <paper-input label="Assigned To" id="assignedTo" error-message="Enter name " auto-validate required></paper-input>
    <paper-input label="Checked Out By" id="checkedOutBy"></paper-input>
    <paper-input label="Description" id="description" error-message="" auto-validate required></paper-input>
    <paper-input label="IMEI Number" id="imei" error-message="" auto-validate required></paper-input>
    <paper-input label="Location" id="location" error-message="" auto-validate required></paper-input>
    <paper-input label="Currently Owned By Company" id="currentCompany" error-message="" auto-validate required></paper-input>
    <paper-input label="Currently Owned By User" id="currentUser" error-message="" ></paper-input>
    <paper-input label="Screen Resolution" id="screenResolution" error-message="" auto-validate required></paper-input>

    <div>
      <h4><b>Operating System</b></h4>
      <paper-radio-group selected="android" id="platform" auto-validate required>
        <paper-radio-button name="android">Android</paper-radio-button>
        <paper-radio-button name="ios">iOS</paper-radio-button>
        <paper-radio-button name="windows">Windows</paper-radio-button>
        <paper-radio-button name="blackberry">Black Berry</paper-radio-button>
      </paper-radio-group>
      <paper-input label="OS Version" id="osVersion" auto-validate required></paper-input>

    </div>

    <div>
      <h4><b>Condition</b></h4>
      <paper-radio-group selected="yes" id="assetCondition" auto-validate required>
        <paper-radio-button name="yes">Working</paper-radio-button>
        <paper-radio-button name="no">Faulty</paper-radio-button>
      </paper-radio-group>
      <paper-checkbox id="isOutdated">Outdated</paper-checkbox>
    </div>

    <div>
      <h4><b>Available</b></h4>
      <paper-radio-group selected="yes" id="availability" auto-validate required>
        <paper-radio-button name="yes">Yes</paper-radio-button>
        <paper-radio-button name="no">No</paper-radio-button>
      </paper-radio-group>
    </div>
    <paper-button tabindex="0" raised class="colorful" on-click="createAsset">Create Asset</paper-button>
  </paper-material>

  </template>

  <script>
    Polymer({
      is: 'create-asset',

      createAsset: function() {
        console.log('Initiating Asset Creation');
        var assetsRef = new Firebase(app.env.db.assets);
        var picture = document.querySelector('#squareImage').querySelector('iron-image').src;
        var assetId = document.getElementById('assetId').value;
        var brand = document.getElementById('brand').value;
        var model = document.getElementById('model').value;
        var assignedTo = document.getElementById('assignedTo').value;
        var checkedOutBy = document.getElementById('checkedOutBy').value;
        var description = document.getElementById('description').value;
        var imei = document.getElementById('imei').value;
        var location = document.getElementById('location').value;
        var currentCompany = document.getElementById('currentCompany').value;
        var currentUser = document.getElementById('currentUser').value;
        var screenResolution = document.getElementById('screenResolution').value;
        var platform = document.getElementById('platform').selected;
        var osVersion = document.getElementById('osVersion').value;
        var assetCondition = document.getElementById('assetCondition').selected;
        var isOutdated =  document.getElementById('isOutdated').checked;
        var availability = document.getElementById('availability').selected;

        assetsRef.child(assetId).set({
          'picture': picture,
          'assetId': assetId,
          'brand': brand,
          'model': model,
          'assignedTo': assignedTo,
          'checkedOutBy': checkedOutBy,
          'description': description,
          'imei': imei,
          'location': location,
          'currentCompany': currentCompany,
          'currentUser': currentUser,
          'screenResolution': screenResolution,
          'platform': platform,
          'osVersion': osVersion,
          'assetCondition': assetCondition,
          'isOutdated': isOutdated,
          'availability': availability
        });
        app.$.toast.text = 'Successfully created asset.';
        app.$.toast.duration = 5000;
        app.$.toast.show();
        page.redirect(app.baseUrl + 'assets');
      }
    });
  </script>
</dom-module>
