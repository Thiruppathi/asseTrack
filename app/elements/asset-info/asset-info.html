<dom-module id="asset-info">

  <style type="text/css">
    .assetData {
      padding: 1em;
      margin: 1em;
    }

    .asset-image {
      text-align: center;
      border-radius: 100%;
      width: 50px;
      height: 50px;
      position: relative;
    }

    iron-icon.style-scope.asset-info.x-scope.iron-icon-0 {
      padding-right: 0.5em;
      width: 100px;
      height: 100px;
    }
  </style>
  <template>
    <firebase-document id="getUserFB" location="[[computeUserHref(asset)]]" data="{{user}}"></firebase-document>
    <firebase-document id="getAssetFB" location="[[computeAssetHref(assetid)]]" data="{{asset}}"></firebase-document>
    <paper-material class="assetData" id="[[assetid]]" entry-animation="scale-up-animation"
              exit-animation="fade-out-animation">
      <iron-icon icon="{{computeAssetIcon(asset)}}" class="assetIcon"></iron-icon>
      <p>{{asset.assetid}}</p>
      <p>{{computeFullName(asset)}}</p>
      <p><b>Asset ID: </b><span>{{computeAssetId(asset)}}</span></p>
      <b>Checked Out By:</b> <span>{{computeUserName(user)}}</span>
      <p>{{asset.isCheckedIn}}</p>
    </paper-material>
  </template>

  <script>
    Polymer({
      is: 'asset-info',
      properties: {
        assetid: Number
      },
      computeAssetHref: function(assetid) {
        return 'https://assetrack.firebaseio.com/assets/' + assetid;
      },
      computeUserHref: function(asset) {
        return 'https://assetrack.firebaseio.com/users/' + asset.checkedOutBy;
      },
      computeFullName: function(asset) {
        return asset.brand + ' ' + asset.model;
      },
      computeUserName: function(user) {
        return (user.firstName || '') + ' ' + (user.lastName || '');
      },
      computeAssetId: function(asset) {
        return asset.assetId;
      },
      computeHref: function(asset) {
        return 'assets/' + asset.assetId;
      },
      computeAssetIcon: function(asset) {
        var platform = asset.platform;
        var icon = 'hardware:smartphone';
        if (platform === 'android') {
          icon = 'hardware:phone-android';
        } else if (platform === 'ios') {
          icon = 'hardware:phone-iphone';
        } else if (platform === 'windows') {
          icon = 'hardware:smartphone';
        } else if (platform === 'blackberry') {
          icon = 'hardware:smartphone';
        }
        return icon;
      }
    });
  </script>
</dom-module>
